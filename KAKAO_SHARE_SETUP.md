# 카카오톡 공유하기 설정 가이드

## 개요
주문 상세 페이지에서 카카오톡으로 주문 정보를 공유할 수 있는 기능입니다.
친구나 채팅방을 선택하여 주문 정보를 전송할 수 있습니다.

## 설정 방법

### 1. 카카오 개발자 콘솔 설정

1. **카카오 개발자 콘솔 접속**
   - https://developers.kakao.com/ 접속
   - 로그인 후 "내 애플리케이션" 선택

2. **애플리케이션 선택 또는 생성**
   - 기존 앱이 있다면 선택
   - 없다면 "애플리케이션 추가하기"로 새 앱 생성

3. **앱 키 확인**
   - 좌측 메뉴에서 "앱 설정" > "앱 키" 선택
   - **JavaScript 키** 복사 (예: `1234567890abcdef1234567890abcdef`)

4. **플랫폼 설정**
   - 좌측 메뉴에서 "앱 설정" > "플랫폼" 선택
   - "Web 플랫폼 등록" 클릭
   - 사이트 도메인 등록:
     ```
     http://localhost:3000          (개발용)
     https://yourdomain.com         (운영용)
     ```

5. **카카오 메시지 (선택사항)**
   - 좌측 메뉴에서 "제품 설정" > "카카오 로그인" 선택
   - 활성화 설정 ON
   - 이 단계는 카카오 로그인 사용 시 필요

### 2. 환경 변수 설정

`.env.local` 파일에 JavaScript 키를 추가:

```bash
# Kakao Configuration
NEXT_PUBLIC_KAKAO_JS_KEY=여기에_JavaScript_키_입력
```

**주의사항:**
- `NEXT_PUBLIC_` 접두사가 있어야 클라이언트에서 사용 가능합니다
- JavaScript 키를 입력하세요 (REST API 키가 아닙니다)
- 키 입력 후 개발 서버를 재시작하세요

### 3. 개발 서버 재시작

```bash
npm run dev
```

환경 변수 변경 후에는 반드시 서버를 재시작해야 합니다.

## 사용 방법

### 모바일 환경
1. 주문 상세 페이지에서 "공유하기" 버튼 클릭
2. 공유 모달에서 "카카오톡" 선택
3. 카카오톡 앱이 열리며 친구/채팅방 선택 화면 표시
4. 공유할 대상 선택 후 전송

### PC 환경
1. 주문 상세 페이지에서 "공유하기" 버튼 클릭
2. 링크가 자동으로 클립보드에 복사됩니다

## 공유되는 정보

카카오톡으로 공유 시 다음 정보가 포함됩니다:
- 업체명
- 주문번호
- 총 결제금액
- 상품 대표 이미지
- 주문 상세 페이지 링크

## 문제 해결

### "카카오톡 SDK가 로드되지 않았습니다"
- 페이지를 새로고침하세요
- 네트워크 연결을 확인하세요
- 브라우저 콘솔에서 에러 메시지를 확인하세요

### "카카오톡 앱 키가 설정되지 않았습니다"
- `.env.local` 파일에 `NEXT_PUBLIC_KAKAO_JS_KEY`가 정확히 설정되어 있는지 확인
- 개발 서버를 재시작했는지 확인
- 환경 변수 이름의 오타가 없는지 확인

### "카카오톡 공유 기능을 사용할 수 없습니다"
- 카카오 개발자 콘솔에서 Web 플랫폼이 등록되어 있는지 확인
- 현재 도메인이 등록된 도메인과 일치하는지 확인
- JavaScript 키가 올바른지 확인

### 카카오톡이 열리지 않음
- 모바일에서 카카오톡 앱이 설치되어 있는지 확인
- 브라우저에서 팝업 차단이 해제되어 있는지 확인
- 카카오 개발자 콘솔의 플랫폼 설정을 다시 확인

## 구현 상세

### 파일 위치
- 레이아웃: `src/app/layout.tsx` (Kakao SDK 로드)
- 컴포넌트: `src/components/orders/OrderDetailPage.tsx` (공유 기능)

### 주요 기능
1. **자동 SDK 로드**: 페이지 로드 시 Kakao SDK 자동 초기화
2. **환경별 처리**: 모바일/PC 환경에 따라 다른 공유 방식 제공
3. **에러 처리**: 상세한 에러 메시지로 문제 파악 용이
4. **타입 안전성**: TypeScript 인터페이스로 타입 안전성 보장

## 참고 자료
- [카카오 개발자 문서 - JavaScript SDK](https://developers.kakao.com/docs/latest/ko/javascript/getting-started)
- [카카오 개발자 문서 - 카카오톡 공유](https://developers.kakao.com/docs/latest/ko/message/js-link)
- [카카오 개발자 콘솔](https://developers.kakao.com/console)
